     1                                  ; x32 version - 64-bit mode with 32-bit user space pointers
     2                                          section .text
     3                                          global  mystrrev
     4                                  mystrrev:
     5 00000000 89F9                            mov     ecx, edi
     6 00000002 89CA                            mov     edx, ecx
     7                                  
     8                                  find_eos:
     9 00000004 8A02                            mov     al, [rdx]
    10 00000006 FFC2                            inc     edx
    11 00000008 84C0                            test    al, al
    12 0000000A 75F8                            jnz     find_eos
    13                                  
    14 0000000C 83EA02                          sub     edx, 2
    15                                  swap:
    16 0000000F 39CA                            cmp     edx, ecx
    17 00000011 760C                            jbe     fin
    18 00000013 8A01                            mov     al, [rcx]
    19 00000015 8602                            xchg    al, [rdx]
    20 00000017 8801                            mov     [rcx], al
    21 00000019 FFC1                            inc     ecx
    22 0000001B FFCA                            dec     edx
    23 0000001D EBF0                            jmp     swap
    24                                  
    25                                  fin:
    26 0000001F 89F8                            mov     eax, edi
    27 00000021 C3                              ret
